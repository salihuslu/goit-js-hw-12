{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '50099197-cf66e6150e6b3edf0d1a830a4';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('input[name=\"searchQuery\"]');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    currentQuery = input.value.trim();\n    if (!currentQuery) return;\n\n    currentPage = 1;\n    gallery.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n    showLoader(true);\n\n    try {\n        const { hits, totalHits: total } = await fetchImages(currentQuery, currentPage);\n        totalHits = total;\n        if (hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        } else {\n            renderImages(hits);\n            lightbox.refresh();\n            if (totalHits > PER_PAGE && gallery.children.length > 0) {\n                loadMoreBtn.classList.remove('hidden');\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while fetching images.',\n            position: 'topRight',\n        });\n    } finally {\n        showLoader(false);\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    showLoader(true);\n\n    try {\n        const { hits } = await fetchImages(currentQuery, currentPage);\n        renderImages(hits);\n        lightbox.refresh();\n        scrollByCards();\n\n        if (currentPage * PER_PAGE >= totalHits) {\n            loadMoreBtn.classList.add('hidden');\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while loading more images.',\n            position: 'topRight',\n        });\n    } finally {\n        showLoader(false);\n    }\n});\n\nasync function fetchImages(query, page) {\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: PER_PAGE,\n        },\n    });\n    return response.data;\n}\n\nfunction renderImages(images) {\n    const markup = images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => `\n    <div class=\"photo-card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <div><p class=\"label\">Likes</p><p class=\"value\">${likes}</p></div>\n        <div><p class=\"label\">Views</p><p class=\"value\">${views}</p></div>\n        <div><p class=\"label\">Comments</p><p class=\"value\">${comments}</p></div>\n        <div><p class=\"label\">Downloads</p><p class=\"value\">${downloads}</p></div>\n      </div>\n    </div>`\n        )\n        .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoader(show) {\n    if (show) {\n        loader.classList.remove('hidden');\n    } else {\n        loader.classList.add('hidden');\n    }\n}\n\n\nfunction scrollByCards() {\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","currentPage","currentQuery","totalHits","form","input","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","e","showLoader","hits","total","fetchImages","iziToast","renderImages","scrollByCards","query","page","axios","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","show","cardHeight"],"mappings":"owBAMA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GACjB,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhB,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,2BAA2B,EAC1DC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAE9CN,EAAK,iBAAiB,SAAU,MAAOO,GAAM,CAGzC,GAFAA,EAAE,eAAc,EAChBT,EAAeG,EAAM,MAAM,OACvB,EAACH,EAEL,CAAAD,EAAc,EACdK,EAAQ,UAAY,GACpBE,EAAY,UAAU,IAAI,QAAQ,EAClCI,EAAW,EAAI,EAEf,GAAI,CACA,KAAM,CAAE,KAAAC,EAAM,UAAWC,CAAK,EAAK,MAAMC,EAAYb,EAAcD,CAAW,EAC9EE,EAAYW,EACRD,EAAK,SAAW,EAChBG,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,GAEDC,EAAaJ,CAAI,EACjBJ,EAAS,QAAO,EACZN,EAAYH,GAAYM,EAAQ,SAAS,OAAS,GAClDE,EAAY,UAAU,OAAO,QAAQ,EAGhD,MAAe,CACZQ,EAAS,MAAM,CACX,QAAS,2CACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNJ,EAAW,EAAK,CACnB,EACL,CAAC,EAEDJ,EAAY,iBAAiB,QAAS,SAAY,CAC9CP,IACAW,EAAW,EAAI,EAEf,GAAI,CACA,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAME,EAAYb,EAAcD,CAAW,EAC5DgB,EAAaJ,CAAI,EACjBJ,EAAS,QAAO,EAChBS,IAEIjB,EAAcD,GAAYG,IAC1BK,EAAY,UAAU,IAAI,QAAQ,EAClCQ,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UAC1B,CAAa,EAER,MAAe,CACZA,EAAS,MAAM,CACX,QAAS,+CACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNJ,EAAW,EAAK,CACnB,CACL,CAAC,EAED,eAAeG,EAAYI,EAAOC,EAAM,CAYpC,OAXiB,MAAMC,EAAM,IAAItB,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGqB,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUpB,CACb,CACT,CAAK,GACe,IACpB,CAEA,SAASiB,EAAaK,EAAQ,CAC1B,MAAMC,EAASD,EACV,IACG,CAAC,CACG,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CAChB,IAAkB;AAAA;AAAA,iBAEDL,CAAa;AAAA,oBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,0DAGYC,CAAK;AAAA,0DACLC,CAAK;AAAA,6DACFC,CAAQ;AAAA,8DACPC,CAAS;AAAA;AAAA,WAG9D,EACA,KAAK,EAAE,EACZxB,EAAQ,mBAAmB,YAAaiB,CAAM,CAClD,CAEA,SAASX,EAAWmB,EAAM,CAClBA,EACAxB,EAAO,UAAU,OAAO,QAAQ,EAEhCA,EAAO,UAAU,IAAI,QAAQ,CAErC,CAGA,SAASW,GAAgB,CACrB,KAAM,CAAE,OAAQc,CAAU,EAAK1B,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACZ,IAAK0B,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}